<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link href=http://www.hipnuc.com/index_cn.html/um_common_ch/at_cmd/ rel=canonical><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.6.2"><title>At cmd - HiPNUC 文件中心</title><link rel=stylesheet href=../../assets/stylesheets/application.adb8469c.css><link rel=stylesheet href=../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content><script src=../../assets/javascripts/modernizr.86422ebf.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=black data-md-color-accent=black> <svg class=md-svg> <defs> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#at tabindex=0 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=http://www.hipnuc.com/index_cn.html title="HiPNUC 文件中心" aria-label="HiPNUC 文件中心" class="md-header-nav__button md-logo"> <i class=md-icon>home</i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> HiPNUC 文件中心 </span> <span class=md-header-nav__topic> At cmd </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input aria-label=search name=query placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Type to start searching </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=http://www.hipnuc.com/index_cn.html title="HiPNUC 文件中心" class="md-nav__button md-logo"> <i class=md-icon>home</i> </a> HiPNUC 文件中心 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-1 type=checkbox id=nav-1> <label class=md-nav__link for=nav-1> 文档中心 </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-1> 文档中心 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title=下载中心 class=md-nav__link> 下载中心 </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#at class=md-nav__link> AT指令 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 产品支持数据包列表 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#atid class=md-nav__link> AT+ID </a> </li> <li class=md-nav__item> <a href=#aturfr class=md-nav__link> AT+URFR </a> </li> <li class=md-nav__item> <a href=#atinfo class=md-nav__link> AT+INFO </a> </li> <li class=md-nav__item> <a href=#atodr class=md-nav__link> AT+ODR </a> </li> <li class=md-nav__item> <a href=#atbaud class=md-nav__link> AT+BAUD </a> </li> <li class=md-nav__item> <a href=#ateout class=md-nav__link> AT+EOUT </a> </li> <li class=md-nav__item> <a href=#atrst class=md-nav__link> AT+RST </a> </li> <li class=md-nav__item> <a href=#attrg class=md-nav__link> AT+TRG </a> </li> <li class=md-nav__item> <a href=#atsetpel class=md-nav__link> AT+SETPEL </a> </li> <li class=md-nav__item> <a href=#atmode class=md-nav__link> AT+MODE </a> </li> <li class=md-nav__item> <a href=#atgwid class=md-nav__link> AT+GWID </a> </li> <li class=md-nav__item> <a href=#atgwcfg class=md-nav__link> AT+GWCFG </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1>At cmd</h1> <h2 id=at>AT指令</h2> <p>当使用串口与模块通讯时, 模块支持AT 指令集配置/查看模块参数。AT 指令总以ASCII 码<code>AT</code> 开头，后面跟控制字符，最 后以回车换行<code>\r\n</code>结束。可使用串口调试助手进行测试：</p> <p><img alt src=../common_figures/at_cmd.png></p> <p>通用模块 AT指令如下</p> <table> <thead> <tr> <th>指令</th> <th>功能</th> <th>掉电保存(Y)</th> <th>立即生效(Y),复位生效(R)</th> </tr> </thead> <tbody> <tr> <td>AT+ID</td> <td>设置模块用户ID</td> <td>Y</td> <td>R</td> </tr> <tr> <td>AT+URFR</td> <td>旋转模块传感器坐标系</td> <td>Y</td> <td>R</td> </tr> <tr> <td>AT+INFO</td> <td>打印模块信息</td> <td>N</td> <td>Y</td> </tr> <tr> <td>AT+ODR</td> <td>设置模块串口输出帧频率</td> <td>Y</td> <td>R</td> </tr> <tr> <td>AT+BAUD</td> <td>设置串口波特率</td> <td>Y</td> <td>R</td> </tr> <tr> <td>AT+EOUT</td> <td>数据输出开关</td> <td>N</td> <td>Y</td> </tr> <tr> <td>AT+RST</td> <td>复位模块</td> <td>N</td> <td>Y</td> </tr> <tr> <td>AT+TRG</td> <td>单次输出触发</td> <td>N</td> <td>Y</td> </tr> <tr> <td>AT+SETPEL</td> <td>设置输出数据包</td> <td>Y</td> <td>Y</td> </tr> <tr> <td>AT+MODE</td> <td>设置模块工作模式</td> <td>Y</td> <td>R</td> </tr> <tr> <td>AT+GWID</td> <td>设置无线网关ID</td> <td>Y</td> <td>R</td> </tr> <tr> <td>AT+GWCFG</td> <td>设置接收机无线网络属性</td> <td>Y</td> <td>R</td> </tr> </tbody> </table> <h4 id=_1>产品支持数据包列表</h4> <p>下表列出所有产品支持的数据包, ***** 表示支持 **-**表示不支持</p> <table> <thead> <tr> <th>产品</th> <th align=left>ID</th> <th align=left>URFR</th> <th align=left>INFO</th> <th>ODR</th> <th>BAUD</th> <th>EOUT</th> <th>RST</th> <th>TRG</th> <th>SETPTL</th> <th>MODE</th> <th>GWID</th> <th>GWCFG</th> </tr> </thead> <tbody> <tr> <td>HI226</td> <td align=left>*</td> <td align=left>*</td> <td align=left>*</td> <td>*</td> <td>*</td> <td>*</td> <td>*</td> <td>*</td> <td>*</td> <td>-</td> <td>-</td> <td>-</td> </tr> <tr> <td>HI229</td> <td align=left>*</td> <td align=left>*</td> <td align=left>*</td> <td>*</td> <td>*</td> <td>*</td> <td>*</td> <td>*</td> <td>*</td> <td>*</td> <td>-</td> <td>-</td> </tr> <tr> <td>CH110</td> <td align=left>*</td> <td align=left>*</td> <td align=left>*</td> <td>*</td> <td>*</td> <td>*</td> <td>*</td> <td>-</td> <td>*</td> <td>-</td> <td>-</td> <td>-</td> </tr> <tr> <td>HI221</td> <td align=left>*</td> <td align=left>*</td> <td align=left>*</td> <td>*</td> <td>*</td> <td>*</td> <td>*</td> <td>-</td> <td>-</td> <td>-</td> <td>*</td> <td>-</td> </tr> <tr> <td>HI221GW</td> <td align=left>*</td> <td align=left>*</td> <td align=left>*</td> <td>*</td> <td>*</td> <td>*</td> <td>*</td> <td>-</td> <td>-</td> <td>-</td> <td>*</td> <td>*</td> </tr> </tbody> </table> <h5 id=atid>AT+ID</h5> <p>设置模块用户ID</p> <p><strong>例</strong> <code>AT+ID=1</code></p> <h5 id=aturfr>AT+URFR</h5> <p>某些情况下传感器需要倾斜垂直安装，这时候需要旋转传感器坐标系，这条指令提供了旋转传感器坐标系的接口：</p> <p><code>AT+URFR=C00,C01,C02,C10,C11,C12,C20,C21,C22</code> </p> <p>其中 <span><span class=MathJax_Preview>C_{nn}</span><script type=math/tex>C_{nn}</script></span> 支持浮点数 </p> <div> <div class=MathJax_Preview> \left\{\begin{array}{l}{X} \\ {Y} \\ {Z}\end{array}\right\}_{U}=\left[\begin{array}{lll}{C 00} &amp; {C 01} &amp; {C 02} \\ {C 10} &amp; {C 11} &amp; {C 12} \\ {C 20} &amp; {C 21} &amp; {C 22}\end{array}\right] \cdot\left\{\begin{array}{l}{X} \\ {Y} \\ {Z}\end{array}\right\}_{B} </div> <script type="math/tex; mode=display">
\left\{\begin{array}{l}{X} \\ {Y} \\ {Z}\end{array}\right\}_{U}=\left[\begin{array}{lll}{C 00} & {C 01} & {C 02} \\ {C 10} & {C 11} & {C 12} \\ {C 20} & {C 21} & {C 22}\end{array}\right] \cdot\left\{\begin{array}{l}{X} \\ {Y} \\ {Z}\end{array}\right\}_{B}
</script> </div> <p>其中<span><span class=MathJax_Preview>\left\{\begin{array}{l}{X} \\ {Y} \\ {Z}\end{array}\right\}_{U}</span><script type=math/tex>\left\{\begin{array}{l}{X} \\ {Y} \\ {Z}\end{array}\right\}_{U}</script></span>为旋转后的 传感器坐标系下 传感器数据，<span><span class=MathJax_Preview>\left\{\begin{array}{l}{X} \\ {Y} \\ {Z}\end{array}\right\}_{B}</span><script type=math/tex>\left\{\begin{array}{l}{X} \\ {Y} \\ {Z}\end{array}\right\}_{B}</script></span>为旋转前 传感器坐标系下 传感器数据</p> <p>下面是几种常用旋转举例：</p> <ul> <li> <p>新传感器坐标系为 绕原坐标系X轴 旋转 90°， 输入命令：<code>AT+URFR=1,0,0,0,0,1,0,-1,0</code></p> </li> <li> <p>新传感器坐标系为 绕原坐标系X轴 旋转-90°， 输入命令：<code>AT+URFR=1,0,0,0,0,-1,0,1,0</code></p> </li> <li> <p>新传感器坐标系为 绕原坐标系X轴 旋转180°， 输入命令：<code>AT+URFR=1,0,0,0,-1,0,0,0,-1</code></p> </li> <li> <p>新传感器坐标系为 绕原坐标系Y轴 旋转 90°， 输入命令：<code>AT+URFR= 0,0,-1,0,1,0,1,0,0</code></p> </li> <li> <p>新传感器坐标系为 绕原坐标系Y轴 旋转-90°， 输入命令：<code>AT+URFR= 0,0,1,0,1,0,-1,0,0</code></p> </li> <li> <p>新传感器坐标系为 绕原坐标系Y轴 旋转180°， 输入命令：<code>AT+URFR= -1,0,0,0,1,0,0,0,-1</code></p> </li> <li> <p>恢复默认值：<code>AT+URFR=1,0,0,0,1,0,0,0,1</code></p> </li> </ul> <h5 id=atinfo>AT+INFO</h5> <p>打印模块信息，包括产品型号，版本，固件发布日期等。AT+INFO可以拓展二级指令实现更多信息的查询</p> <table> <thead> <tr> <th>INFO二级拓展指令</th> <th>功能</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>CAL</td> <td>显示模块内部校准参数</td> <td>AT+INFO=CAL</td> </tr> <tr> <td>RF</td> <td>显示无线设备参数</td> <td>AT+INFO=RF</td> </tr> <tr> <td>VER</td> <td>显示详细版本信息</td> <td>AT+INFO=VER</td> </tr> </tbody> </table> <h5 id=atodr>AT+ODR</h5> <p>设置模块串口输出速率。 掉电保存，复位模块生效</p> <p><strong>例</strong> 设置串口输出速率为100Hz: <code>AT+ODR=100</code> </p> <h5 id=atbaud>AT+BAUD</h5> <p>设置串口波特率，可选值：4800/9600/115200/256000/460800`</p> <p><strong>例</strong> <code>AT+BAUD=115200</code></p> <p>!!! note "注意"</p> <ul> <li>使用此指令需要特别注意，输入错误波特率后可能会导致无法和模块通讯</li> <li>波特率参数设置好后掉电保存，复位模块生效。上位机的波特率也要做相应修改。</li> <li>升级固件时，需要切换回115200 波特率。</li> </ul> <h5 id=ateout>AT+EOUT</h5> <p>串口输出开关</p> <p><strong>例</strong> 打开串口输出 <code>AT+EOUT=1</code> 关闭串口输出 <code>AT+EOUT=0</code></p> <h5 id=atrst>AT+RST</h5> <p>复位模块</p> <p><strong>例</strong> <code>AT+RST</code></p> <h5 id=attrg>AT+TRG</h5> <p>触发模块输出一帧数据，可以配合AT+ODR=0来实现单次触发输出。</p> <p><strong>例</strong> <code>AT+TRG</code></p> <h5 id=atsetpel>AT+SETPEL</h5> <p>设置输出协议:</p> <p>模块数据帧中的数据包组成可使用AT指令配置，格式为<code>AT+SETPTL=&lt;ITEM_ID&gt;,&lt;ITEM_ID&gt;...</code> 一帧输出可包含最多8个数据包。</p> <p><strong>例</strong> 配置模块输出加速度，角速度, 整形格式欧拉角和四元数的指令为：<code>AT+SETPTL=A0,B1,D0,D1</code></p> <p><img alt src=../common_figures/at_setptl.png></p> <h5 id=atmode>AT+MODE</h5> <p>设置模块工作模式</p> <p><strong>例</strong> </p> <ul> <li>设置模块工作在6轴模式(无磁校准) <code>AT+MODE=0</code></li> <li>设置模块工作在9轴模式(地磁场传感器参与航向角校正) <code>AT+MODE=1</code></li> </ul> <h5 id=atgwid>AT+GWID</h5> <p>可通过AT+GWID指令配置，GWID属性决定了接收器和节点的RF频率，只有节点的GWID 和接收器的 GWID相同时，模块和接收器直接才能通讯。GWID相当于无线网段，当在同一地点使用多个接收机组成多个星形网络时，必须保证每个接收器的GWID(网段)不同。</p> <p><strong>例</strong> 将一个接收器设置为GWID=3， 并将3个模块的自身ID设置为 0,1,2 并连接到这个接收器上：</p> <p>接收机配置：</p> <p><code>AT+GWID=3</code></p> <p>节点0配置： </p> <p><code>AT+GWID=3</code> </p> <p><code>AT+ID=0</code></p> <p>节点1配置：</p> <p><code>AT+GWID=3</code> </p> <p><code>AT+ID=1</code></p> <p>节点2配置：</p> <p><code>AT+GWID=3</code> </p> <p><code>AT+ID=2</code></p> <p>最后所有接收机节点复位/重新上电生效。</p> <h5 id=atgwcfg>AT+GWCFG</h5> <p>配置接收机支持的节点数和无线通讯频率。接收机默认支持8个节点，每个节点100Hz通讯频率。(通讯频率乘以节点)的乘积受到RF带宽的限制，错误的配置将会导致无法输出数据。推荐的配置如下：</p> <table> <thead> <tr> <th>配置选项</th> <th>通讯频率(Hz,每个节点)</th> <th>支持的节点数</th> </tr> </thead> <tbody> <tr> <td>1(出厂默认)</td> <td>100</td> <td>8</td> </tr> <tr> <td>2</td> <td>200</td> <td>4</td> </tr> <tr> <td>3</td> <td>30</td> <td>16</td> </tr> </tbody> </table> <p><strong>例</strong> 配置接收机支持的最大节点数为16，每个节点接收频率为30Hz，依次输入:</p> <p><code>AT+GWCFG=FRQ,30</code></p> <p><code>AT+GWCFG=CNT,16</code></p> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2016 - 2020 HiPNUC </div> powered by <a href=https://www.mkdocs.org target=_blank rel=noopener>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/application.c33a9706.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script> <script src=../../extra.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>